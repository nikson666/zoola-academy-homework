{"mappings":"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","sources":["src/app.js"],"sourcesContent":["const meshContainer = document.querySelector(\".mesh\");\r\nconst scoreContainer = document.querySelector(\".score\");\r\nscoreContainer.textContent = 0\r\nscoreContainer.style.background = \"green\"\r\n\r\n/**\r\n * @description cycle for creating items into mesh\r\n */\r\n\r\nfor (let i = 0; i < 25; i++) {\r\n  const item = createElement(\"div\", \"item\")\r\n  meshContainer.appendChild(item)\r\n}\r\n\r\nconst meshSize = meshContainer.children.length;\r\nconst arrayOfElements = meshContainer.querySelectorAll('.item')\r\nconst classNameActiveElement = \"item-highlighted\"\r\n\r\nconst rules = {\r\n  gameSpeed: 1000,\r\n  positiveСlick: 1,\r\n  negativeClick: 2,\r\n  doubleClickPenalty: 2,\r\n  outsideClickPenalty: 3,\r\n  addingPointsInOneClick: 1,\r\n  noClickPenalty: 5,\r\n  maxPoints: 20,\r\n  minPoints: -20,\r\n\r\n  onOutsideActiveElementClick: () => {\r\n    for (item of arrayOfElements) {\r\n      item.addEventListener(\"click\", e => {\r\n        const currentElement = e.target\r\n        if (!currentElement.classList.contains(classNameActiveElement)) {\r\n          if (currentScore > rules.minPoints && currentScore < rules.maxPoints) {\r\n            currentScore -= rules.outsideClickPenalty\r\n            scoreContainer.innerText = currentScore;\r\n          }\r\n        }\r\n        scoreContainer.style.background = currentScore < 0 ? \"red\" : \"green\"\r\n      })\r\n    }\r\n  },\r\n\r\n  onActiveElementClick: () => {\r\n    currentClick = currentClick + 1\r\n    if (currentClick >= rules.negativeClick) {\r\n      currentScore -= rules.doubleClickPenalty\r\n    } else if (currentClick === rules.positiveСlick) {\r\n      currentScore += rules.addingPointsInOneClick\r\n    }\r\n    scoreContainer.innerText = currentScore;\r\n  }\r\n}\r\n\r\n/**\r\n * @description A function to be executed after each game iteration, is set to null by default\r\n */\r\nlet deactivateElement = null;\r\n/**\r\n * @description Current score\r\n */\r\nlet currentScore = 0;\r\n/**\r\n * @description Current click\r\n */\r\nlet currentClick = 0;\r\n/**\r\n * @description previous index of  active elemnt\r\n */\r\nlet prevIndexOfElement = 0\r\n/**\r\n * @description previous index of  active color\r\n */\r\nlet prevIndexOfColor = 0\r\n\r\nconst gameInterval = setInterval(runGameIteration, rules.gameSpeed);\r\n\r\nfunction runGameIteration() {\r\n  /**\r\n   * Alternatively, this could be written like following: deactivateElement?.()\r\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining\r\n   */\r\n  if (deactivateElement) {\r\n    deactivateElement();\r\n  }\r\n\r\n  const randomIndexOfActiveEl = getNoRepeatedRandomIndex(prevIndexOfElement, meshSize);\r\n  const activeElement = meshContainer.children[randomIndexOfActiveEl];\r\n\r\n  if (activeElement) {\r\n    deactivateElement = activateElement(activeElement, randomIndexOfActiveEl);\r\n  }\r\n\r\n  scoreContainer.innerText = currentScore;\r\n\r\n  currentScore < 0 ? scoreContainer.style.background = \"red\" : scoreContainer.style.background = \"green\"\r\n\r\n  if (currentScore < rules.minPoints || currentScore > rules.maxPoints) {\r\n    clearInterval(gameInterval)\r\n    deactivateElement();\r\n  }\r\n}\r\n\r\n\r\nfunction activateElement(element, index) {\r\n  const variant = getVariantForIndex();\r\n  element.classList.add(classNameActiveElement, variant);\r\n  element.addEventListener(\"click\", rules.onActiveElementClick)\r\n\r\n  /**\r\n   * `activateElement` returns a clean-up function that we can later execute to undo any changes made to the active element.\r\n   * It it very convenient to have such function defined immediately, while we still have `variant` and `element` available.\r\n   * A mechanism of returning a function is called \"closure\".\r\n   */\r\n  return function unhighlight() {\r\n    prevIndexOfElement = index\r\n    element.classList.remove(classNameActiveElement, variant);\r\n    element.removeEventListener(\"click\", rules.onActiveElementClick)\r\n    if (currentClick === 0) { currentScore -= rules.noClickPenalty }\r\n    currentClick = 0\r\n  };\r\n}\r\n\r\nrules.onOutsideActiveElementClick()\r\n\r\n/**\r\n * @description This function takes an integer and returns a random integer between 0 and the given number\r\n */\r\nfunction getRandomNumber(max) {\r\n  return Math.floor(Math.random() * max);\r\n}\r\n\r\nfunction getVariantForIndex() {\r\n  const variants = [\r\n    \"item-highlighted-1\",\r\n    \"item-highlighted-2\",\r\n    \"item-highlighted-3\",\r\n  ];\r\n\r\n  const maxIndex = variants.length\r\n  const randomColorIndex = getNoRepeatedRandomIndex(prevIndexOfColor, maxIndex)\r\n  prevIndexOfColor = randomColorIndex\r\n  return variants[randomColorIndex];\r\n}\r\n\r\n/**\r\n * @description This function created index and replace index if it repeated \r\n */\r\nfunction getNoRepeatedRandomIndex(prevIndex, maxIndex) {\r\n  const newIndex = getRandomNumber(maxIndex);\r\n  if (prevIndex !== newIndex) {\r\n    return newIndex\r\n  }\r\n  return getNoRepeatedRandomIndex(prevIndex, maxIndex)\r\n}\r\n\r\n/**\r\n * @description The function for creating a new element\r\n */\r\nfunction createElement(element, className) {\r\n  const newElement = document.createElement(element)\r\n  newElement.classList.add(className)\r\n  return newElement\r\n}\r\n\r\n\r\n\r\n"],"names":[],"version":3,"file":"index.816e7b21.js.map","sourceRoot":"/__parcel_source_root/"}